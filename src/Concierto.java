import java.util.ArrayList;
import java.util.Objects;

public class Concierto {
    private String artista;
    private String ciudad;
    protected double precioBase;
    private int aforoMaximo;
    private ArrayList<Entrada> entradasVendidas;
    private boolean activo;

    public Concierto(String artista, String ciudad, double precioBase, int aforoMaximo, ArrayList<Entrada> entradasVendidas, boolean activo) {
        this.artista = artista;
        this.ciudad = ciudad;
        this.precioBase = precioBase;
        this.aforoMaximo = aforoMaximo;
        this.entradasVendidas = entradasVendidas;
        this.activo = activo;
    }

    public Concierto() {
        this.entradasVendidas = new ArrayList<>();
    }

    public String getArtista() {
        return artista;
    }

    public void setArtista(String artista) {
        this.artista = artista;
    }

    public String getCiudad() {
        return ciudad;
    }

    public void setCiudad(String ciudad) {
        this.ciudad = ciudad;
    }

    public double getPrecioBase() {
        return precioBase;
    }

    public void setPrecioBase(double precioBase) {
        this.precioBase = precioBase;
    }

    public int getAforoMaximo() {
        return aforoMaximo;
    }

    public void setAforoMaximo(int aforoMaximo) {
        this.aforoMaximo = aforoMaximo;
    }

    public ArrayList<Entrada> getEntradasVendidas() {
        return entradasVendidas;
    }

    public void setEntradasVendidas(ArrayList<Entrada> entradasVendidas) {
        this.entradasVendidas = entradasVendidas;
    }

    public boolean isActivo() {
        return activo;
    }

    public void setActivo(boolean activo) {
        this.activo = activo;
    }

    @Override
    public boolean equals(Object o) {
        if (this == o) return true;
        if(o == null || getClass() != o.getClass()) return false;
        Concierto concierto = (Concierto) o;
        return Objects.equals(artista, concierto.artista) && Objects.equals(ciudad, concierto.ciudad);
    }

    @Override
    public int hashCode() {
        return Objects.hash(artista, ciudad);
    }



    public double calcularPrecioTotal() {
        double precioTotal = 0;
        for (Entrada entrada : entradasVendidas) {
            precioTotal += entrada.getPrecioTotal();
        }
        return precioTotal;
    }


    
    public double calcularPrecioMedio() {
        if (entradasVendidas.isEmpty()) {
            return 0;
        }

        double total = 0;
        for (Entrada entrada : entradasVendidas) {
            total += entrada.getPrecioTotal();
        }

        double precioMedio = total / entradasVendidas.size();
        return precioMedio;
        }


    public boolean entradasDisponibles() {
        return entradasVendidas.size() < aforoMaximo;
    }


    @Override
    public String toString() {
        return "Concierto de "  + artista + " en " + ciudad;
    }

}
